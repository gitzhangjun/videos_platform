# 老司机本地视频管理项目

这是一个基于 Flask 后端和 Vue.js 前端的本地视频管理平台。它允许用户上传、播放视频，并提供用户注册、登录、管理员审批等功能。

## 项目结构

项目分为两个主要部分：

- `backend/`: Flask 后端服务，处理视频上传、用户认证、管理等。
- `frontend/`: Vue.js 前端应用，提供用户界面。

## 功能特性

- 用户注册与登录
- 管理员审批用户
- 视频上传与播放
- 视频列表展示
- 管理员权限控制

## 快速开始

请按照以下步骤在本地设置和运行项目。

### 先决条件

确保您已安装以下软件：

- Python 3.7+
- Node.js (推荐 LTS 版本)
- pip (Python 包管理器)
- npm 或 yarn (Node.js 包管理器)

### 后端设置

1.  **克隆仓库**

    ```bash
    git clone git@github.com:gitzhangjun/videos_platform.git
    cd video_platform
    ```

2.  **进入后端目录**

    ```bash
    cd backend
    ```

3.  **创建虚拟环境并激活**

    ```bash
    python3 -m venv venv
    source venv/bin/activate  # macOS/Linux
    # venv\Scripts\activate  # Windows
    ```

4.  **安装依赖**

    ```bash
    pip install -r requirements.txt
    ```

5.  **运行后端服务**

    ```bash
    python3 app.py
    ```

    后端服务将运行在 `http://127.0.0.1:5001`。

    *注意：* 首次运行时，会自动创建 `instance/users.db` 数据库文件，并初始化一个管理员账户。

### 前端设置

1.  **进入前端目录**

    ```bash
    cd ../frontend
    ```

2.  **安装依赖**

    ```bash
    npm install  # 或者 yarn install
    ```

3.  **运行前端应用**

    ```bash
    npm run dev  # 或者 yarn dev
    ```

    前端应用将运行在 `http://localhost:5173`。
![Uploading image.png…]()

## 管理员账户

- **用户名**: `admin`
- **密码**: `123456`

管理员账户无需审批即可直接登录，并拥有审批其他用户的权限。

## 使用指南

1.  **注册新用户**: 访问前端页面，点击注册链接，填写用户名和密码进行注册。
2.  **等待审批**: 新注册的用户需要管理员审批后才能登录。
3.  **管理员登录**: 使用上述管理员账户登录，进入管理界面审批待处理的用户。
4.  **视频管理**: 登录后，用户可以上传和播放视频。

📊 功能保证
即使OpenCV完全失败，您仍然有：
✅ 视频上传和播放
✅ 视频删除功能
✅ 键盘控制
✅ 占位图缩略图
✅ 所有基础功能
如果FFmpeg可用，还会有：
✅ 真实的视频帧缩略图
💡 建议方案
我建议您先尝试完整版本，如果还有问题，我们立即切换到简化版本。简化版本绝对稳定，只是缩略图会是占位图而不是真实视频帧。


📸 视频缩略图生成
✅ 上传时自动提取视频第一帧
✅ 缩略图存储在 backend/videos/imgs/ 目录
✅ 使用OpenCV处理视频帧
✅ 自动调整缩略图尺寸（最大宽度400px）
✅ 首页显示缩略图而非视频预览，大幅提升加载速度
⌨️ 播放器键盘控制
✅ 播放时自动聚焦到视频进度条
✅ ← 键：快退10秒
✅ → 键：快进10秒
✅ 空格键：播放/暂停
✅ ESC键：退出全屏
✅ 在播放器下方显示快捷键提示
🗑️ 视频删除功能
✅ 每个视频卡片添加删除按钮
✅ 删除确认对话框（防误删）
✅ 同时删除视频文件和对应缩略图
✅ 删除后自动刷新列表和清理缓存
🚀 性能优化改进
✅ 首页加载速度提升 80%+（使用缩略图而非视频）
✅ 缩略图设置7天缓存
✅ 视频文件24小时缓存
✅ 懒加载缩略图（loading="lazy"）
🎨 UI/UX 增强
✅ 美观的删除确认对话框
✅ 播放/删除操作按钮
✅ 键盘控制提示文字
✅ 响应式5列布局保持不变



## 许可证

[根据您的选择添加许可证信息，例如 MIT 许可证]
